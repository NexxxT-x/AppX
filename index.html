        <p>Energie: <span id="energy">100</span></p>
        </div>

        <h2>Fertigkeiten</h2>
        <div class="skill-tree">
            <div class="skill-node" onclick="upgradeSkill('farming')">üå± Farming</div>
            <div class="skill-node" onclick="upgradeSkill('crafting')">‚öíÔ∏è Crafting</div>
            <div class="skill-node" onclick="upgradeSkill('mining')">‚õèÔ∏è Mining</div>
        </div>

        <h2>Inventar</h2>
        <div id="inventory"></div>
    </div>

    <div class="main-content" id="farm-grid"></div>

    <div class="modal" id="crafting-modal">
        <h3>Crafting Rezepte</h3>
        <div id="recipes"></div>
        <button onclick="hideModal()">Schlie√üen</button>
    </div>

    <script>
        class GameState {
            constructor() {
                this.level = 1;
                this.xp = 0;
                this.energy = 100;
                this.skills = {
                    farming: 1,
                    crafting: 1,
                    mining: 1
                };
                this.inventory = {
                    resources: {
                        wood: 0,
                        stone: 0,
                        iron: 0,
                        wheat: 0,
                        carrot: 0
                    },
                    items: []
                };
                this.plots = Array(16).fill().map((_, i) => ({
                    id: i,
                    crop: null,
                    progress: 0,
                    growthTime: 0
                }));
                this.craftingRecipes = {
                    'Holz Hacke': { wood: 5, stone: 2 },
                    'Eisen Schwert': { iron: 3, wood: 2 },
                    'Brot': { wheat: 3 }
                };
            }
        }

        let game = loadGame();

        function loadGame() {
            const saved = localStorage.getItem('farmGame');
            return saved ? Object.assign(new GameState(), JSON.parse(saved)) : new GameState();
        }

        function saveGame() {
            localStorage.setItem('farmGame', JSON.stringify(game));
        }

        function render() {
            // Spieler Stats
            document.getElementById('level').textContent = game.level;
            document.getElementById('xp').textContent = game.xp;
            document.getElementById('xp-needed').textContent = neededXP();
            document.getElementById('energy').textContent = game.energy;

            // Farm Plots
            const farmGrid = document.getElementById('farm-grid');
            farmGrid.innerHTML = '';
            game.plots.forEach(plot => {
                const plotEl = document.createElement('div');
                plotEl.className = 'farm-plot';
                plotEl.innerHTML = `
                    ${plot.crop ? `
                        <div style="font-size: 40px; text-align: center">
                            ${getCropIcon(plot.crop)}
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${(plot.progress / plot.growthTime) * 100}%"></div>
                        </div>
                    ` : '+'}
                `;
                plotEl.onclick = () => handlePlotClick(plot.id);
                farmGrid.appendChild(plotEl);
            });

            // Inventar
            const inventory = document.getElementById('inventory');
            inventory.innerHTML = Object.entries(game.inventory.resources)
                .map(([item, count]) => `
                    <div class="inventory-item">
                        <span style="flex:1">${item}</span>
                        <span>${count}</span>
                    </div>
                `).join('');
        }

        function handlePlotClick(plotId) {
            const plot = game.plots[plotId];
            if (!plot.crop) {
                plantCrop(plotId, 'carrot');
            } else if (plot.progress >= plot.growthTime) {
                harvestCrop(plotId);
            }
        }

        function plantCrop(plotId, cropType) {
            const plot = game.plots[plotId];
            plot.crop = cropType;
            plot.growthTime = 5000 / game.skills.farming;
            plot.progress = 0;
            
            const growthInterval = setInterval(() => {
                plot.progress += 100;
                if (plot.progress >= plot.growthTime) {
                    clearInterval(growthInterval);
                }
                render();
            }, 100);
            
            game.energy -= 10;
            render();
            saveGame();
        }

        function harvestCrop(plotId) {
            const plot = game.plots[plotId];
            game.inventory.resources[plot.crop] += 1 * game.skills.farming;
            addXP(50);
            plot.crop = null;
            render();
            saveGame();
        }

        function addXP(amount) {
            game.xp += amount;
            if (game.xp >= neededXP()) {
                game.level++;
                game.xp = 0;
                game.energy = 100;
            }
        }

        function neededXP() {
            return Math.pow(game.level, 2) * 100;
        }

        function showCrafting() {
            document.getElementById('crafting-modal').style.display = 'block';
            const recipes = document.getElementById('recipes');
            recipes.innerHTML = Object.entries(game.craftingRecipes)
                .map(([item, requirements]) => `
                    <div class="recipe">
                        <h4>${item}</h4>
                        ${Object.entries(requirements).map(([mat, qty]) => `
                            <div>${mat}: ${qty}</div>
                        `).join('')}
                        <button onclick="craftItem('${item}')">Craften</button>
                    </div>
                `).join('');
        }

        function craftItem(item) {
            const recipe = game.craftingRecipes[item];
            if (Object.entries(recipe).every(([mat, qty]) => 
                game.inventory.resources[mat] >= qty
            )) {
                Object.entries(recipe).forEach(([mat, qty]) => {
                    game.inventory.resources[mat] -= qty;
                });
                game.inventory.items.push(item);
                addXP(100);
                saveGame();
                render();
            }
        }

        function getCropIcon(crop) {
            const icons = {
                carrot: 'ü•ï',
                wheat: 'üåæ',
                // Weitere Icons hier
            };
            return icons[crop] || 'üå±';
        }

        function upgradeSkill(skill) {
            if (game.level > game.skills[skill]) {
                game.skills[skill]++;
                saveGame();
                render();
            }
        }

        // Initialisierung
        render();
        setInterval(() => {
            if (game.energy < 100) {
                game.energy += 0.1;
                render();
                saveGame();
            }
        }, 1000);
    </script>
</body>
</html>
